<mat-expansion-panel>
  <mat-expansion-panel-header>
    <mat-panel-title>
      <mat-checkbox
        class="checkbox"
        [checked]="allComplete"
        [indeterminate]="someComplete()"
        (change)="setVisibilityAllLayers.emit($event.checked)"
      >
        {{ task.name | translate }}
      </mat-checkbox>
    </mat-panel-title>
  </mat-expansion-panel-header>

  <li mat-menu-item *ngFor="let subtask of task.subtasks; index as i" (click)="stopPropagation($event)">
    <mat-checkbox class="checkbox" [(ngModel)]="subtask.completed" (ngModelChange)="setVisibilityLayer.emit(i)">
      {{ subtask.name | translate }}
    </mat-checkbox>
  </li>
</mat-expansion-panel>
